{% extends "base.html" %}

{% block title %}Mis hÃ¡bitos - Habit Tracker{% endblock %}

{% block content %}
<h1>ğŸ“ˆ Hola, {{ usuario.nombre }}</h1>

<div class="nav">
    <a href="/habitos">ğŸ“ˆ HÃ¡bitos</a>
    <a href="/semanas">ğŸ“… Semanas</a>
    <a href="/logout" style="margin-left: auto;">ğŸšª Salir</a>
</div>

<h2>Tus hÃ¡bitos</h2>

{% if usuario.listar_habitos() %}
    {% for h in usuario.listar_habitos() %}
        <div class="habit-item">
            <div class="habit-info">
                <div class="habit-name">
                    {% if h.esta_completado_hoy() %}âœ…{% else %}â­•{% endif %} {{ h.nombre }}
                </div>
                <div class="habit-stats">
                    <span class="badge badge-streak">ğŸ”¥ Racha: {{ h.racha_actual() }} dÃ­as</span>
                    <span style="margin-left: 8px; color: #a0aec0;">Mejor: {{ h.mejor_racha() }} dÃ­as</span>
                </div>
            </div>
            <div class="actions">
                {% if not h.esta_completado_hoy() %}
                <form method="POST" action="/habito/completar">
                    <input type="hidden" name="nombre" value="{{ h.nombre }}">
                    <button type="submit" class="btn-small btn-success">âœ… Completar</button>
                </form>
                {% endif %}
                <form method="POST" action="/habito/eliminar" onsubmit="return confirm('Â¿Seguro que quieres eliminar este hÃ¡bito?');">
                    <input type="hidden" name="nombre" value="{{ h.nombre }}">
                    <button type="submit" class="btn-small btn-danger">ğŸ—‘ï¸</button>
                </form>
            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <div class="empty-state-icon">ğŸŒ±</div>
        <p>No tienes hÃ¡bitos todavÃ­a</p>
        <p style="font-size: 0.875rem; margin-top: 8px;">Â¡Crea tu primer hÃ¡bito para empezar!</p>
    </div>
{% endif %}

<h3>â• Crear nuevo hÃ¡bito</h3>
<form method="POST" action="/habito/nuevo" style="display: flex; gap: 12px;">
    <input type="text" name="nombre" placeholder="Ej: Meditar 10 minutos" required style="flex: 1; margin-bottom: 0;">
    <button type="submit" class="btn-success">Crear</button>
</form>
{% endblock %}